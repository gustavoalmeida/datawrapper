/*! datawrapper - v1.10.2 */
(function(){function getDelimiterPatterns(a,b){return new RegExp("(\\"+a+"|\\r?\\n|\\r|^)(?:"+b+"([^"+b+"]*(?:"+b+'"[^'+b+"]*)*)"+b+"|([^"+b+"\\"+a+"\\r\\n]*))","gi")}var root=this,dw={};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=dw),exports.dw=dw):window.dw=dw,dw.dataset=function(a,b){function c(a){for(var b=a.name(),c=b,e=1;d.hasOwnProperty(c);)c=b+"."+e++;c!=b&&a.name(c)}var d={},e=a.slice(0);_.each(a,function(a){c(a),d[a.name()]=a}),b=_.extend(b,{});var f={columns:function(){return a},column:function(b){if(_.isString(b)){if(void 0!==d[b])return d[b];throw'No column found with that name: "'+b+'"'}if(!(0>b)){if(void 0!==a[b])return a[b];throw"No column found with that index: "+b}},numColumns:function(){return a.length},numRows:function(){return a[0].length},eachColumn:function(b){_.each(a,b)},hasColumn:function(b){return void 0!==(_.isString(b)?d[b]:a[b])},indexOf:function(b){return f.hasColumn(b)?_.indexOf(a,d[b]):-1},list:function(){return _.range(a[0].length).map(function(b){var c={};return _.each(a,function(a){c[a.name()]=a.val(b)}),c})},toCSV:function(){var b="",c=",",d='"';return _.each(a,function(a,e){var f=a.title();f.indexOf(d)>-1&&f.replace(d,"\\"+d),f.indexOf(c)>-1&&(f=d+f+d),b+=(e>0?c:"")+f}),_.each(_.range(f.numRows()),function(e){b+="\n",_.each(a,function(a,f){var g=""+("date"==a.type()?a.raw(e):a.val(e));g.indexOf(d)>-1&&g.replace(d,"\\"+d),g.indexOf(c)>-1&&(g=d+g+d),b+=(f>0?c:"")+g})}),b},filterColumns:function(b){return a=_.filter(a,function(a){return!b[a.name()]}),_.each(b,function(a,b){a&&d[b]&&delete d[b]}),f},eachRow:function(a){var b;for(b=0;b<f.numRows();b++)a(b);return f},add:function(b){return c(b),a.push(b),d[b.name()]=b,e.push(b),f},reset:function(){return a=e.slice(0),d={},_.each(a,function(a){d[a.name()]=a}),f}};return f},dw.column=function(a,b,c){function d(a){if(_.every(b,_.isNumber))return dw.column.types.number();if(_.every(b,_.isDate))return dw.column.types.date();var c,d=[dw.column.types.date(a),dw.column.types.number(a),dw.column.types.text()],e=b.length,f=.1;return _.each(b,function(a){_.each(d,function(b){b.parse(a)})}),_.every(d,function(a){return a.errors()/e<f&&(c=a),!c}),c}var e=_.map(_.shuffle(_.range(b.length)).slice(0,200),function(a){return b[a]});c=c?dw.column.types[c](e):d(e);var f,g,h,i=b.slice(0),j={name:function(){return arguments.length?(a=arguments[0],j):dw.utils.purifyHtml(a)},title:function(){return arguments.length?(h=arguments[0],j):dw.utils.purifyHtml(h||a)},length:b.length,val:function(a,d){if(arguments.length){var e=d?i:b;return 0>a&&(a+=e.length),c.parse(dw.utils.purifyHtml(e[a]))}},values:function(a){var d=a?i:b;return d=_.map(d,dw.utils.purifyHtml),_.map(d,c.parse)},each:function(a){for(var c=0;c<b.length;c++)a(j.val(c),c)},raw:function(a,c){return arguments.length?2==arguments.length?(b[a]=c,j):dw.utils.purifyHtml(b[a]):b},type:function(a){if(a===!0)return c;if(_.isString(a)){if(dw.column.types[a])return c=dw.column.types[a](e),j;throw"unknown column type: "+a}return c.name()},range:function(){return c.toNum?(f||(f=[Number.MAX_VALUE,-Number.MAX_VALUE],j.each(function(a){a=c.toNum(a),_.isNumber(a)&&!_.isNaN(a)&&(a<f[0]&&(f[0]=a),a>f[1]&&(f[1]=a))}),f[0]=c.fromNum(f[0]),f[1]=c.fromNum(f[1])),f):!1},total:function(){return c.toNum?(g||(g=0,j.each(function(a){g+=c.toNum(a)}),g=c.fromNum(g)),g):!1},filterRows:function(a){return b=[],arguments.length?_.each(a,function(a){b.push(i[a])}):b=i.slice(0),j.length=b.length,f=g=!1,j},toString:function(){return a+" ("+c.name()+")"},indexOf:function(a){return _.find(_.range(b.length),function(b){return j.val(b)==a})}};return j},dw.column.types={},dw.column.types.text=function(){return{parse:_.identity,errors:function(){return 0},name:function(){return"text"},formatter:function(){return _.identity},isValid:function(){return!0},format:function(){}}},dw.column.types.number=function(a){function b(a,b){return 0===a?0:Math.round(b-Math.ceil(Math.log(Math.abs(a))/Math.LN10))}var c,d=0,e={"-.":/^ *[-–—]?[0-9]*(\.[0-9]+)?(e[\+\-][0-9]+)?%? *$/,"-,":/^ *[-–—]?[0-9]*(,[0-9]+)?%? *$/,",.":/^ *[-–—]?[0-9]{1,3}(,[0-9]{3})*(\.[0-9]+)?%? *$/,".,":/^ *[-–—]?[0-9]{1,3}(\.[0-9]{3})*(,[0-9]+)?%? *$/," .":/^ *[-–—]?[0-9]{1,3}( [0-9]{3})*(\.[0-9]+)?%? *$/," ,":/^ *[-–—]?[0-9]{1,3}( [0-9]{3})*(,[0-9]+)?%? *$/," .":/^ *[-–—]?[0-9]{1,3}( [0-9]{3})*(\.[0-9]+)?%? *$/," ,":/^ *[-–—]?[0-9]{1,3}( [0-9]{3})*(,[0-9]+)?%? *$/},f={"-.":"1234.56","-,":"1234,56",",.":"1,234.56",".,":"1.234,56"," .":"1 234.56"," ,":"1 234,56"," .":"1 234.56"," ,":"1 234,56"},g={na:1,"n/a":1,"-":1,":":1},h={},i=["-.",0];a=a||[],_.each(a,function(a){_.each(e,function(b,c){void 0===h[c]&&(h[c]=0),b.test(a)&&(h[c]+=1,h[c]>i[1]&&(i[0]=c,i[1]=h[c]))})}),c=i[0];var j={parse:function(a){if(_.isNumber(a)||_.isUndefined(a)||_.isNull(a))return a;var b=a.replace("%","").replace("–","-").replace("—","-");return"-"!=c[0]&&(b=b.replace(c[0],"")),"."!=c[1]&&(b=b.replace(c[1],".")),isNaN(b)||""===b?(g[b.toLowerCase()]||""===b||d++,a):Number(b)},toNum:function(a){return a},fromNum:function(a){return a},errors:function(){return d},name:function(){return"number"},formatter:function(a){var c=a["number-format"]||"-",d=Number(a["number-divisor"]||0),e=(a["number-append"]||"").replace(/ /g," "),f=(a["number-prepend"]||"").replace(/ /g," ");return function(a,g,h){if(isNaN(a))return a;var i=c;if(0!==d&&"-"==i&&(i="n1"),0!==d&&(a=Number(a)/Math.pow(10,d)),"s"==i.substr(0,1)){var j=+i.substr(1);i="n"+Math.max(0,b(a,j))}return h&&(i="n0"),"-"==i&&(i=a==Math.round(a)?"n0":a==.1*Math.round(10*a)?"n1":"n2"),a=Globalize.format(a,"-"!=i?i:null),g?f+a+e:a}},isValid:function(a){return""===a||g[String(a).toLowerCase()]||_.isNumber(j.parse(a))},ambiguousFormats:function(){var a=[];return _.each(h,function(b,c){b==i[1]&&a.push([c,f[c]])}),a},format:function(a){return arguments.length?(c=a,j):c}};return j},dw.column.types.date=function(a){function b(a,b){var c=j[b];return _.isRegExp(c.test)?c.test.test(a):c.test(a,b)}function c(a,b){var c=j[b];return _.isRegExp(c.parse)?a.match(c.parse):c.parse(a,b)}function d(a,b,c){var d=new Date(Date.UTC(a,0,3));return d.setUTCDate(3-d.getUTCDay()+7*(b-1)+parseInt(c,10)),d}function e(a){var b=a.getUTCDay(),c=new Date(a.valueOf());c.setDate(c.getDate()-(b+6)%7+3);var d=c.getUTCFullYear(),e=Math.floor((c.getTime()-new Date(d,0,1,-6))/864e5);return[d,1+Math.floor(e/7),b>0?b:7]}var f,g=0,h={},i=["",0],j={YYYY:{test:/^ *(?:1[7-9]|20)\d{2} *$/,parse:/^ *(\d{4}) *$/,precision:"year"},"YYYY-H":{test:/^ *[12]\d{3}[ \-\/]?[hH][12] *$/,parse:/^ *(\d{4})[ \-\/]?[hH]([12]) *$/,precision:"half"},"H-YYYY":{test:/^ *[hH][12][ \-\/][12]\d{3} *$/,parse:/^ *[hH]([12])[ \-\/](\d{4}) *$/,precision:"half"},"YYYY-Q":{test:/^ *[12]\d{3}[ \-\/]?[qQ][1234] *$/,parse:/^ *(\d{4})[ \-\/]?[qQ]([1234]) *$/,precision:"quarter"},"Q-YYYY":{test:/^ *[qQ]([1234])[ \-\/][12]\d{3} *$/,parse:/^ *[qQ]([1234])[ \-\/](\d{4}) *$/,precision:"quarter"},"YYYY-M":{test:/^ *([12]\d{3}) ?[ \-\/\.mM](0?[1-9]|1[0-2]) *$/,parse:/^ *(\d{4}) ?[ \-\/\.mM](0?[1-9]|1[0-2]) *$/,precision:"month"},"M-YYYY":{test:/^ *(0?[1-9]|1[0-2]) ?[ \-\/\.][12]\d{3} *$/,parse:/^ *(0?[1-9]|1[0-2]) ?[ \-\/\.](\d{4}) *$/,precision:"month"},"YYYY-WW":{test:/^ *[12]\d{3}[ -]?[wW](0?[1-9]|[1-4]\d|5[0-3]) *$/,parse:/^ *(\d{4})[ -]?[wW](0?[1-9]|[1-4]\d|5[0-3]) *$/,precision:"week"},"MM/DD/YYYY":{test:/^ *(0?[1-9]|1[0-2])([\-\/] ?)(0?[1-9]|[1-2]\d|3[01])\2([12]\d{3})$/,parse:/^ *(0?[1-9]|1[0-2])([\-\/] ?)(0?[1-9]|[1-2]\d|3[01])\2(\d{4})$/,precision:"day"},"DD/MM/YYYY":{test:/^ *(0?[1-9]|[1-2]\d|3[01])([\-\.\/ ?])(0?[1-9]|1[0-2])\2([12]\d{3})$/,parse:/^ *(0?[1-9]|[1-2]\d|3[01])([\-\.\/ ?])(0?[1-9]|1[0-2])\2(\d{4})$/,precision:"day"},"YYYY-MM-DD":{test:/^ *([12]\d{3})([\-\/\. ?])(0?[1-9]|1[0-2])\2(0?[1-9]|[1-2]\d|3[01])$/,parse:/^ *(\d{4})([\-\/\. ?])(0?[1-9]|1[0-2])\2(0?[1-9]|[1-2]\d|3[01])$/,precision:"day"},"YYYY-WW-d":{test:/^ *[12]\d{3}[ \-]?[wW](0?[1-9]|[1-4]\d|5[0-3])(?:[ \-]?[1-7]) *$/,parse:/^ *(\d{4})[ \-]?[wW](0?[1-9]|[1-4]\d|5[0-3])(?:[ \-]?([1-7])) *$/,precision:"day"},"MM/DD/YYYY HH:MM":{test:/^ *(0?[1-9]|1[0-2])([-\/] ?)(0?[1-9]|[1-2]\d|3[01])\2([12]\d{3}) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d) *$/,parse:/^ *(0?[1-9]|1[0-2])([-\/] ?)(0?[1-9]|[1-2]\d|3[01])\2(\d{4}) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d) *$/,precision:"day-minutes"},"DD.MM.YYYY HH:MM":{test:/^ *(0?[1-9]|[1-2]\d|3[01])([-\.\/ ?])(0?[1-9]|1[0-2])\2([12]\d{3}) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d) *$/,parse:/^ *(0?[1-9]|[1-2]\d|3[01])([-\.\/ ?])(0?[1-9]|1[0-2])\2(\d{4}) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d) *$/,precision:"day-minutes"},"YYYY-MM-DD HH:MM":{test:/^ *([12]\d{3})([-\/\. ?])(0?[1-9]|1[0-2])\2(0?[1-9]|[1-2]\d|3[01]) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d) *$/,parse:/^ *(\d{4})([-\/\. ?])(0?[1-9]|1[0-2])\2(0?[1-9]|[1-2]\d|3[01]) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d) *$/,precision:"day-minutes"},"MM/DD/YYYY HH:MM:SS":{test:/^ *(0?[1-9]|1[0-2])([-\/] ?)(0?[1-9]|[1-2]\d|3[01])\2([12]\d{3}) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d)(?::([0-5]\d))? *$/,parse:/^ *(0?[1-9]|1[0-2])([-\/] ?)(0?[1-9]|[1-2]\d|3[01])\2(\d{4}) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d)(?::([0-5]\d))? *$/,precision:"day-seconds"},"DD.MM.YYYY HH:MM:SS":{test:/^ *(0?[1-9]|[1-2]\d|3[01])([-\.\/ ?])(0?[1-9]|1[0-2])\2([12]\d{3}) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d)(?::([0-5]\d))? *$/,parse:/^ *(0?[1-9]|[1-2]\d|3[01])([-\.\/ ?])(0?[1-9]|1[0-2])\2(\d{4}) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d)(?::([0-5]\d))? *$/,precision:"day-seconds"},"YYYY-MM-DD HH:MM:SS":{test:/^ *([12]\d{3})([-\/\. ?])(0?[1-9]|1[0-2])\2(0?[1-9]|[1-2]\d|3[01]) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d)(?::([0-5]\d))? *$/,parse:/^ *(\d{4})([-\/\. ?])(0?[1-9]|1[0-2])\2(0?[1-9]|[1-2]\d|3[01]) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d)(?::([0-5]\d))? *$/,precision:"day-seconds"}};a=a||[],_.each(j,function(c,d){_.each(a,function(a){void 0===h[d]&&(h[d]=0),b(a,d)&&(h[d]+=1,h[d]>i[1]&&(i[0]=d,i[1]=h[d]))})}),f=i[0];var k={parse:function(a){if(_.isDate(a)||_.isUndefined(a))return a;if(!f||!_.isString(a))return g++,a;var e=c(a,f);if(!e)return g++,a;switch(b(a,f)||g++,f){case"YYYY":return new Date(e[1],0,1);case"YYYY-H":return new Date(e[1],6*(e[2]-1),1);case"H-YYYY":return new Date(e[2],6*(e[1]-1),1);case"YYYY-Q":return new Date(e[1],3*(e[2]-1),1);case"Q-YYYY":return new Date(e[2],3*(e[1]-1),1);case"YYYY-M":return new Date(e[1],e[2]-1,1);case"M-YYYY":return new Date(e[2],e[1]-1,1);case"YYYY-WW":return d(e[1],e[2],1);case"YYYY-WW-d":return d(e[1],e[2],e[3]);case"YYYY-MM-DD":return new Date(e[1],e[3]-1,e[4]);case"DD/MM/YYYY":return new Date(e[4],e[3]-1,e[1]);case"MM/DD/YYYY":return new Date(e[4],e[1]-1,e[3]);case"YYYY-MM-DD HH:MM":return new Date(e[1],e[3]-1,e[4],e[5]||0,e[6]||0,0);case"DD.MM.YYYY HH:MM":return new Date(e[4],e[3]-1,e[1],e[5]||0,e[6]||0,0);case"MM/DD/YYYY HH:MM":return new Date(e[4],e[1]-1,e[3],e[5]||0,e[6]||0,0);case"YYYY-MM-DD HH:MM:SS":return new Date(e[1],e[3]-1,e[4],e[5]||0,e[6]||0,e[7]||0);case"DD.MM.YYYY HH:MM:SS":return new Date(e[4],e[3]-1,e[1],e[5]||0,e[6]||0,e[7]||0);case"MM/DD/YYYY HH:MM:SS":return new Date(e[4],e[1]-1,e[3],e[5]||0,e[6]||0,e[7]||0)}return g++,a},toNum:function(a){return a.getTime()},fromNum:function(a){return new Date(a)},errors:function(){return g},name:function(){return"date"},format:function(a){return arguments.length?(f=a,k):f},precision:function(){return j[f].precision},formatter:function(a){if(!f)return _.identity;var b=Globalize.culture().calendar.patterns.M.replace("MMMM","MMM");switch(j[f].precision){case"year":return function(a){return _.isDate(a)?a.getFullYear():a};case"half":return function(a){return _.isDate(a)?a.getFullYear()+" H"+(a.getMonth()/6+1):a};case"quarter":return function(a){return _.isDate(a)?a.getFullYear()+" Q"+(a.getMonth()/3+1):a};case"month":return function(a){return _.isDate(a)?Globalize.format(a,"MMM yy"):a};case"week":return function(a){return _.isDate(a)?e(a).slice(0,2).join(" W"):a};case"day":return function(a,b){return _.isDate(a)?Globalize.format(a,b?"D":"d"):a};case"day-minutes":return function(a){return _.isDate(a)?Globalize.format(a,b).replace(" ","&nbsp;")+" - "+Globalize.format(a,"t").replace(" ","&nbsp;"):a};case"day-seconds":return function(a){return _.isDate(a)?Globalize.format(a,"T").replace(" ","&nbsp;"):a}}},isValid:function(a){return _.isDate(k.parse(a))},ambiguousFormats:function(){var a=[];return _.each(h,function(b,c){b==i[1]&&a.push([c,c])}),a}};return k},dw.datasource={},dw.datasource.delimited=function(a){function b(){if(a.url)return $.ajax({url:a.url,method:"GET",dataType:"text"}).then(function(b){return new DelimitedParser(a).parse(b)});if(a.csv){var b=$.Deferred(),c=b.then(function(b){return new DelimitedParser(a).parse(b)});return b.resolve(a.csv),c}throw"you need to provide either an URL or CSV data."}var c={dataset:b};return c};var DelimitedParser=function(a){a=_.extend({delimiter:"auto",quoteChar:'"',skipRows:0,emptyValue:null,transpose:!1,firstRowIsHeader:!0},a),this.__delimiterPatterns=getDelimiterPatterns(a.delimiter,a.quoteChar),this.opts=a};_.extend(DelimitedParser.prototype,{parse:function(a){function b(a,b,c){c=c||",";for(var d,e=[[]],f=null;f=a.exec(b);){var g=f[1];g.length&&g!=c&&e.push([]),d=f[2]?f[2].replace(new RegExp('""',"g"),'"'):f[3],e[e.length-1].push(d)}e[0][0].substr(0,1)==h&&(e[0][0]=e[0][0].substr(1));var i=e.length-1,j=e[i].length-1,k=e[i][j].length-1;return e[i][j].substr(k)==h&&(e[i][j]=e[i][j].substr(0,k)),e}function c(a){var b=a,c=b.length?b.length:0,d=b[0]instanceof Array?b[0].length:0;if(0===d||0===c)return[];var e,f,g=[];for(e=0;d>e;e++)for(g[e]=[],f=0;c>f;f++)g[e][f]=b[f][e];return g}function d(a){var b=[],c={},d=a.length,e=a[0].length,g=f.skipRows,h=[];f.firstRowIsHeader&&(h=a[g],g++);for(var i=0;e>i;i++){var j=_.isString(h[i])?h[i].replace(/^\s+|\s+$/g,""):"",k=""!==j?"":1;for(j=""!==j?j:"X.";void 0!==c[j+k];)k=""===k?1:k+1;b.push({name:j+k,data:[]}),c[j+k]=!0}return _.each(_.range(g,d),function(c){_.each(b,function(b,d){b.data.push(""!==a[c][d]?a[c][d]:f.emptyValue)})}),b=_.map(b,function(a){return dw.column(a.name,a.data)}),dw.dataset(b)}var e=this,f=this.opts;e.__rawData=a,"auto"==f.delimiter&&(f.delimiter=e.guessDelimiter(a,f.skipRows),e.__delimiterPatterns=getDelimiterPatterns(f.delimiter,f.quoteChar));var g,h="|"!=f.delimiter?"|":"#";return a=h+a.replace(/\s+$/g,"")+h,g=b(this.__delimiterPatterns,a,f.delimiter),f.transpose&&(g=c(g)),d(g)},guessDelimiter:function(a){var b=0,c=-1,d=this,e=["	",";","|",","];return _.each(e,function(e,f){var g=getDelimiterPatterns(e,d.quoteChar),h=a.match(g).length;h>b&&(b=h,c=f)}),e[c]}}),dw.utils={minMax:function(a){var b=[Number.MAX_VALUE,-Number.MAX_VALUE];return _.each(a,function(a){b[0]=Math.min(b[0],a.range()[0]),b[1]=Math.max(b[1],a.range()[1])}),b},dateFormat:function(a){function b(a){return function(b){d=!e||b.getMonth()!=e.getMonth(),e=b;for(var c=a.length-1,f=a[c];!f[1](b);)f=a[--c];return f[0](b)}}function c(a){var b=function(b){var c=Globalize.format(b,a);return"htt"!=a?c:c.toLowerCase()};return b}var d=!0,e=!1,f=function(a){return{date:"de"==a?"dd.":"dd",hour:"en"!=a?"H:00":"htt",minute:"de"==a?"H:mm":"h:mm",mm:"de"==a?"d.M.":"MM/dd",mmm:"de"==a?"d.MMM":"MMM dd",mmmm:"de"==a?"d. MMMM":"MMMM dd"}}(Globalize.culture().language);return b([[c("yyyy"),function(){return!0}],[c("MMM"),function(a){return 0!==a.getMonth()}],[c(f.date),function(a){return 1!=a.getDate()}],[c(7>a?f.mm:a>70?f.mmm:f.mmm),function(a){return 1!=a.getDate()&&d}],[c(f.hour),function(a){return a.getHours()}],[c(f.minute),function(a){return a.getMinutes()}],[c(":ss"),function(a){return a.getSeconds()}],[c(".fff"),function(a){return a.getMilliseconds()}]])},longDateFormat:function(a){return function(b){if("date"!=a.type())return b;switch(a.type(!0).precision()){case"year":return b.getFullYear();case"quarter":return b.getFullYear()+" Q"+(b.getMonth()/3+1);case"month":return Globalize.format(b,"MMM yy");case"day":return Globalize.format(b,"MMM d");case"minute":return Globalize.format(b,"t");case"second":return Globalize.format(b,"T")}}},columnNameColumn:function(a){var b=_.map(a,function(a){return a.title()});return dw.column("",b)},name:function(a){return _.isFunction(a.name)?a.name():_.isString(a.name)?a.name:a},getMaxChartHeight:function(a){function b(a,b){return"auto"==$(a).css("margin-"+b)?0:+$(a).css("margin-"+b).replace("px","")}var c=0,d=0;$("body > *").each(function(a,e){var f=e.tagName.toLowerCase();"script"==f||"style"==f||"chart"==e.id||$(e).hasClass("tooltip")||$(e).hasClass("qtip")||$(e).hasClass("container")||$(e).hasClass("noscript")||(c+=$(e).outerHeight(!1)),c+=Math.max(b(e,"top"),d),d=b(e,"bottom")}),c+=d;var e=($("#chart").css("margin-top").replace("px",""),$("#chart").css("margin-bottom").replace("px",""),$(window).height()-c-8);return $.support.leadingWhitespace||(e-=15),e-=$("body").css("padding-top").replace("px",""),e-=$("body").css("padding-bottom").replace("px","")},purifyHtml:function(a,b){function c(a,b){return!_.isString(a)||a.indexOf("<")<0?a:(void 0===b&&(b=f),g[b]||(g[b]=(((b||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("")),a.replace(e,"").replace(d,function(a,c){return g[b].indexOf("<"+c.toLowerCase()+">")>-1?a:""}))}var d=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,e=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,f="<b><br><br/><i><strong><sup><sub><strike><u><em><tt>",g={};return void 0===b&&(b=f),g[b]=(((b||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join(""),dw.utils.purifyHtml=c,c(a,b)},significantDimension:function(a){function b(a){return dw.utils.round(a,f)}var c,d,e=[],f=0,g=_.uniq(a);if(1==g.length)return-1*Math.floor(Math.log(g[0])/Math.LN10);_.uniq(_.map(g,b)).length==g.length?(c=function(){return _.uniq(e).length==g.length},d=-1):(c=function(){return _.uniq(e).length<g.length},d=1);var h=100;do e=_.map(g,b),f+=d;while(c()&&h-- >0);return 10>h&&console.warn("maximum iteration reached",a,e,f),0>d?f+=2:f--,f},round:function(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c},smartRound:function(a,b){var c=dw.utils.significantDimension(a);return c+=b||0,_.map(a,function(a){return dw.utils.round(a,c)})},nearest:function(a,b){var c,d=Number.MAX_VALUE;return _.each(a,function(a){var e=Math.abs(a-b);d>e&&(d=e,c=a)}),c},metricSuffix:function(a){switch(a.substr(0,2).toLowerCase()){case"de":return{3:" Tsd.",6:" Mio.",9:" Mrd.",12:" Bio."};case"fr":return{3:" mil",6:" Mio",9:" Mrd"};case"es":return{3:" Mil",6:" millón"};default:return{3:"k",6:"M",9:" bil"}}},magnitudeRange:function(a){var b=Math.round(Math.log(a[0])/Math.LN10),c=Math.round(Math.log(a[1])/Math.LN10);return c-b},logTicks:function(a,b){var c=Math.round(Math.log(a)/Math.LN10),d=Math.round(Math.log(b)/Math.LN10);return _.map(_.range(c,d),function(a){return Math.pow(10,a)})},clone:function(a){return JSON.parse(JSON.stringify(a))}},dw.utils.filter=function(a,b,c,d){function e(b){_.each(g,function(c){_.isFunction(c)&&c(a.val(b),b)})}function f(c){var g;return"auto"==c&&(c="date"==a.type()?"timescale":a.length<6?"buttons":"select"),a.length<2?function(){return!1}:("select"==c&&(g=function(b){var c=$("<select />");return a.each(function(a,b){var e=d(a);e&&c.append('<option value="'+b+'">'+(_.isString(e)?$.trim(e):e)+"</option>")}),c.change(function(a){var b=c.val();e(b)}),c.addClass("filter-ui filter-select"),c}),"buttons"==c&&(g=function(c){var g=$("<div />");g.addClass("filter-ui filter-links"),a.each(function(a,c){var e=d(a);if(e){var f=$('<a href="#'+c+'"'+(c==b?' class="active" ':"")+">"+(_.isString(e)?$.trim(e):e)+"</a>").data("row",c);g.append(f)}}),$("a",g).click(function(a){var b=$(a.target);a.preventDefault(),b.hasClass("active")||($("a",g).removeClass("active"),b.addClass("active"),e(b.data("row")))}),g.appendTo("body");var h=$("a:first",g).offset().top,i=$("a:last",g).offset().top;return h!=i?(g.remove(),f("select")(c)):g}),"timescale"==c&&(g=function(c){function d(b){var c=g.invert(b),d=Number.MAX_VALUE,e=0;return a.each(function(a,b){var f=Math.abs(a.getTime()-c.getTime());d>f&&(d=f,e=b)}),e}var f=Math.min(c.__w-30,Math.max(300,.7*c.__w)),g=d3.time.scale().domain([a.val(0),a.val(-1)]).range([0,f]),h=$("<div></div>").css({position:"relative",height:45,"margin-left":3}).addClass("filter-ui"),i=f/80,j=g.ticks(i),k=Math.round((a.val(-1).getTime()-a.val(0).getTime())/864e5),l=dw.utils.dateFormat(k),m=a.type(!0).formatter(),n=g.ticks(f/8),o=function(b){return Math.max(-18,g(a.val(b))-40)};_.each(j,function(a){var b=$("<span>"+l(a)+"</span>"),d=g(a)-40,e=c.labelWidth(l(a));0>40-.5*e+d&&(d=-40+.5*e),b.css({position:"absolute",top:0,width:80,left:d,"text-align":"center",opacity:.55}),h.append(b)}),_.each(n,function(b){if(!(b.getTime()<a.val(0).getTime()||b.getTime()>a.val(-1).getTime())){var c=$('<span class="dot"></span>');c.css({position:"absolute",bottom:19,width:1,height:"1ex","border-left":"1px solid #000","vertical-align":"bottom",left:Math.round(g(b))+.5}),_.find(j,function(a){return b.getTime()==a.getTime()})||c.css({height:"0.6ex",opacity:.5}),h.append(c)}});var p=$("<div>▲</div>").css({position:"absolute",width:20,bottom:2,left:g(a.val(b))-9,"text-align":"center"});h.append(p);var q=$("<div><span></span></div>").css({position:"absolute",width:80,top:0,left:o(b),"text-align":"center"}).data("last-txt",m(a.val(b))).data("last-left",o(b));$("span",q).css({background:c.theme().colors.background,"font-weight":"bold",padding:"0 1ex"}).html(m(a.val(b))),h.append(q),$("<div />").css({position:"absolute",width:f+1,bottom:15,height:2,"border-bottom":"1px solid #000"}).appendTo(h);var r=$("<div />").css({position:"absolute",left:0,width:f,height:40});h.append(r);var s;return r.click(function(a){var b=a.clientX-r.offset().left,c=d(b);e(c),h.data("update-func")(c),clearTimeout(s)}),r.mousemove(function(b){var c=b.clientX-r.offset().left,f=d(c);$("span",q).html(m(a.val(f))),q.css({left:o(f)}),p.css({left:g(a.val(f))-10}),clearTimeout(s),s=setTimeout(function(){e(f),q.data("last-left",o(f)),q.data("last-txt",q.text())},500)}),r.mouseleave(function(){q.css({left:q.data("last-left")}),p.css({left:q.data("last-left")+30}),$("span",q).html(q.data("last-txt")),clearTimeout(s)}),h.data("update-func",function(b){p.stop().animate({left:g(a.val(b))-10},500,"expoInOut");var c=o(b),d=m(a.val(b));$("span",q).html(d),q.css({left:c}),q.data("last-left",c),q.data("last-txt",d)}),h}),g)}var g=[];c=c||"auto",d=d||_.identity,"auto"==c&&("date"==a.type()?c="timescale":"text"==a.type()&&(c=a.length<6?"buttons":"select"));var h={ui:f(c),change:function(a){g.push(a)}};return h},dw.chart=function(attributes){function applyChanges(a){var b=chart.get("metadata.data.changes",[]),c=chart.get("metadata.data.transpose",!1);_.each(b,function(b){var d="row",e="column";c&&(d="column",e="row"),a.hasColumn(b[e])&&(0===b[d]?a.column(b[e]).title(b.value):a.column(b[e]).raw(b[d]-1,b.value))});var d=chart.get("metadata.data.column-format",{});return _.each(d,function(b,c){b.type&&a.hasColumn(c)&&a.column(c).type(b.type),b["input-format"]&&a.hasColumn(c)&&a.column(c).type(!0).format(b["input-format"])}),a}function addComputedColumns(dataset){function d3_min(a){var b,c,d=-1,e=a.length;if(1===arguments.length){for(;++d<e;)if(null!=(c=a[d])&&c>=c){b=c;break}for(;++d<e;)null!=(c=a[d])&&b>c&&(b=c)}return b}function d3_max(a){var b,c,d=-1,e=a.length;if(1===arguments.length){for(;++d<e;)if(null!=(c=a[d])&&c>=c){b=c;break}for(;++d<e;)null!=(c=a[d])&&c>b&&(b=c)}return b}function d3_sum(a){var b,c=0,d=a.length,e=-1;if(1===arguments.length)for(;++e<d;)d3_numeric(b=+a[e])&&(c+=b);return c}function d3_mean(a){for(var b,c=0,d=a.length,e=-1,f=d;++e<d;)d3_numeric(b=d3_number(a[e]))?c+=b:--f;return f?c/f:void 0}function d3_median(a){var b,c=[],d=a.length,e=-1;if(1===arguments.length)for(;++e<d;)d3_numeric(b=d3_number(a[e]))&&c.push(b);return c.length?d3_quantile(c.sort(d3_ascending),.5):void 0}function d3_quantile(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e}function d3_number(a){return null===a?NaN:+a}function d3_numeric(a){return!isNaN(a)}function d3_ascending(a,b){return b>a?-1:a>b?1:a>=b?0:NaN}function add_computed_column(formula,name){var datefmt=d3.time.format("%Y-%m-%d"),values=data.map(function(row,row_i){var context=[];return context.push("var __row = "+row_i+";"),_.each(row,function(a,b){columnNameToVar[b]&&(context.push("var "+columnNameToVar[b]+" = "+JSON.stringify(a)+";"),"number"==dataset.column(b).type()&&(context.push("var "+columnNameToVar[b]+"__sum = "+col_aggregates[b].sum+";"),context.push("var "+columnNameToVar[b]+"__min = "+col_aggregates[b].min+";"),context.push("var "+columnNameToVar[b]+"__max = "+col_aggregates[b].max+";"),context.push("var "+columnNameToVar[b]+"__mean = "+col_aggregates[b].mean+";"),context.push("var "+columnNameToVar[b]+"__median = "+col_aggregates[b].median+";")))}),context.push("var round = d3.round, mean = d3.mean, median = d3.median,sum = d3.sum, max = Math.max, min = Math.min;"),function(){try{return eval(this.context.join("\n")+"\n"+formula)}catch(e){return"n/a"}}.call({context:context})}).map(function(a){return _.isBoolean(a)?a?"yes":"no":_.isDate(a)?datefmt(a):_.isNumber(a)?""+a:String(a)}),v_col=dw.column(name,values);v_col.isComputed=!0,dataset.add(v_col)}function column_name_to_var(a){return a.toString().toLowerCase().replace(/\s+/g,"_").replace(/[^\w\-]+/g,"").replace(/-/g,"_").replace(/\_\_+/g,"_").replace(/^_+/,"").replace(/_+$/,"").replace(/^(\d)/,"_$1")}var v_columns=chart.get("metadata.describe.computed-columns",{}),data=dataset.list(),columnNameToVar={},col_aggregates={};return dataset.eachColumn(function(a){a.isComputed||(columnNameToVar[a.name()]=column_name_to_var(a.name()),"number"==a.type()&&(col_aggregates[a.name()]={min:d3_min(a.values()),max:d3_max(a.values()),sum:d3_sum(a.values()),mean:d3_mean(a.values()),median:d3_median(a.values())}))}),_.each(v_columns,add_computed_column),dataset}function is_equal(a,b){return JSON.stringify(a)==JSON.stringify(b)}var dataset,theme,visualization,metric_prefix,change_callbacks=$.Callbacks(),locale,chart={get:function(a,b){var c=a.split("."),d=attributes;return _.some(c,function(a){return _.isUndefined(d)||_.isNull(d)?!0:(d=d[a],!1)}),_.isUndefined(d)||_.isNull(d)?b:d},set:function(a,b){var c=a.split("."),d=c.pop(),e=attributes;return _.each(c,function(a){(_.isUndefined(e[a])||_.isNull(e[a]))&&(e[a]={}),e=e[a]}),is_equal(e[d],b)||(e[d]=b,change_callbacks.fire(chart,a,b)),this},load:function(a){var b,c={firstRowIsHeader:chart.get("metadata.data.horizontal-header",!0),transpose:chart.get("metadata.data.transpose",!1)};return a?c.csv=a:c.url="data.csv",b=dw.datasource.delimited(c),b.dataset().pipe(function(a){return chart.dataset(a),a})},dataset:function(a){return arguments.length?(dataset=applyChanges(addComputedColumns(a)),chart):dataset},theme:function(a){return arguments.length?(theme=a,chart):theme||{}},vis:function(a){return arguments.length?(visualization=a,visualization.chart(chart),chart):visualization},hasHighlight:function(){var a=chart.get("metadata.visualize.highlighted-series");return _.isArray(a)&&a.length>0},isHighlighted:function(a){if(void 0===_.isUndefined(a))return!1;var b=this.get("metadata.visualize.highlighted-series"),c=dw.utils.name(a);return!_.isArray(b)||0===b.length||_.indexOf(b,c)>=0},locale:function(a,b){return arguments.length?(locale=a.replace("_","-"),Globalize.cultures.hasOwnProperty(locale)?(Globalize.culture(locale),"function"==typeof b&&b()):$.getScript("/static/vendor/globalize/cultures/globalize.culture."+locale+".js",function(){chart.locale(locale),"function"==typeof b&&b()}),chart):locale},metricPrefix:function(a){return arguments.length?(metric_prefix=a,chart):metric_prefix},formatValue:function(a,b,c){var d=chart.get("metadata.describe.number-format"),e=Number(chart.get("metadata.describe.number-divisor")),f=chart.get("metadata.describe.number-append","").replace(" ","&nbsp;"),g=chart.get("metadata.describe.number-prepend","").replace(" ","&nbsp;");return 0!==e&&(a=Number(a)/Math.pow(10,e)),"-"!=d?((c||a==Math.round(a))&&(d=d.substr(0,1)+"0"),a=Globalize.format(a,d)):0!==e&&(a=a.toFixed(1)),b?g+a+f:a},render:function(a){if(!visualization||!theme||!dataset)throw"cannot render the chart!";visualization.chart(chart),visualization.__init();var b=$(a);b.parent().addClass("vis-"+visualization.id).addClass("theme-"+theme.id),visualization.render(b)},attributes:function(a){return arguments.length?(attributes=a,chart):attributes},onChange:change_callbacks.add,columnFormatter:function(a){var b=chart.get("metadata.data.column-format",{});if(b=b[a.name()]||{},"number"==a.type()&&"auto"==b){var c=dw.utils.metricSuffix(chart.locale()),d=a.values(),e=dw.utils.significantDimension(d),f=-2>e?3*Math.round(-1*e/3):e>2?-1*e:0,g=dw.utils.significantDimension(_.map(d,function(a){return a/Math.pow(10,f)}));b={"number-divisor":f,"number-append":f?c[f]||" × 10<sup>"+f+"</sup>":"","number-format":"n"+Math.max(0,g)}}return a.type(!0).formatter(b)},dataCellChanged:function(a,b){var c=chart.get("metadata.data.changes",[]),d=chart.get("metadata.data.transpose",!1),e=!1;return _.each(c,function(c){var f="row",g="column";d&&(f="column",g="row"),a==c[g]&&c[f]==b&&(e=!0)}),e}};return chart},dw.visualization=function(){var a={},b=function(b){if(!a[b]){console.warn("unknown visualization type: "+b);var c=_.keys(a);return c.length>0&&console.warn("try one of these instead: "+c.join(", ")),!1}return new a[b]};return b.register=function(b){var c=3==arguments.length?a[arguments[1]].prototype:dw.visualization.base,d=arguments[arguments.length-1],e=a[b]=function(){};_.extend(e.prototype,c,{id:b},d)},b}(),dw.visualization.base=function(){}.prototype,_.extend(dw.visualization.base,{__init:function(){return this.__renderedDfd=$.Deferred(),window.parent&&window.parent.postMessage&&window.parent.postMessage("datawrapper:vis:init","*"),this},render:function(a){$(a).html("implement me!")},theme:function(a){if(!arguments.length)return this.__theme;this.__theme=a;var b=["horizontalGrid","verticalGrid","yAxis","xAxis"];return _.each(b,function(b){if(a.hasOwnProperty(b))for(var c in a[b]){var d=c.replace(/([A-Z])/g,"-$1").toLowerCase();a[b].hasOwnProperty(d)||(a[b][d]=a[b][c])}}),this},size:function(a,b){var c=this;return arguments.length?(c.__w=a,c.__h=b,c):[c.__w,c.__h]},get:function(a,b){return this.chart().get("metadata.visualize."+a,b)},notify:function(a){return dw.backend&&_.isFunction(dw.backend.notify)?dw.backend.notify(a):void(window.parent&&window.parent.postMessage?window.parent.postMessage("notify:"+a,"*"):window.console&&console.log(a))},signature:function(){},translate:function(a){var b=this.meta.locale,c=this.lang;return b[a]?b[a][c]||b[a]:a},checkBrowserCompatibility:function(){return!0},chart:function(a){var b=this;if(!arguments.length)return b.__chart;b.dataset=a.dataset(),b.theme(a.theme()),b.__chart=a;var c=a.get("metadata.data.column-format",{}),d={};return _.each(c,function(a,b){d[b]=!!a.ignore}),b.dataset.filterColumns(d),b},axes:function(a,b){function c(a){_.isArray(a)||(a=[a]);for(var b=0;b<a.length;b++)if(!f.hasColumn(a[b]))return!1;return!0}var d=this;if(!b&&d.__axisCache)return d.__axisCache[a?"axesAsColumns":"axes"];var e,f=d.dataset,g={},h={},i={},j=[];return e=d.chart().get("metadata.axes",{}),_.each(d.meta.axes,function(a,b){if(e[b]){var d=e[b];c(d)&&(h[b]=d,_.isArray(d)||(d=[d]),_.each(d,function(a){g[a]=!0}))}}),_.each(d.meta.axes,function(a,b){function c(b){return!g[b.name()]&&_.indexOf(a.accepts,b.type())>=0}function e(){var c=dw.backend?dw.backend.messages.insufficientData:"The visualization needs at least one column of the type %type to populate axis %key";j.push(c.replace("%type",a.accepts).replace("%key",b))}if(!h[b])if(a.optional)h[b]=!1;else if(a.multiple)h[b]=[],f.eachColumn(function(a){c(a)&&(g[a.name()]=!0,h[b].push(a.name()))}),h[b].length||e();else{var i,k=_.filter(f.columns(),c);if(a.preferred){var l=new RegExp(a.preferred,"i");i=_.find(k,function(a){return l.test(a.name())||a.title()!=a.name()&&l.test(a.title())})}if(i||(i=k[0]),i)g[i.name()]=!0,h[b]=i.name();else if(_.indexOf(a.accepts,"text")>=0){var m=dw.column(b,_.map(_.range(f.numRows()),function(a){
return(a>25?String.fromCharCode(64+a/26):"")+String.fromCharCode(65+a%26)}),"text");f.add(m),d.chart().dataset(f),g[m.name()]=!0,h[b]=m.name()}else e()}}),j.length&&d.notify(j.join("<br />")),_.each(h,function(a,b){_.isArray(a)?(i[b]=[],_.each(a,function(a,c){i[b][c]=a!==!1?d.dataset.column(a):null})):i[b]=a!==!1?d.dataset.column(a):null}),d.__axisCache={axes:h,axesAsColumns:i},d.axes(a)},keys:function(){var a=this,b=a.axes();if(b.labels){var c=a.dataset.column(b.labels),d=a.chart().columnFormatter(c),e=[];return c.each(function(a){e.push(String(d(a)))}),e}return[]},keyLabel:function(a){return a},reset:function(){this.clear(),$("#chart").html("").off("click").off("mousemove").off("mouseenter").off("mouseover"),$(".chart .filter-ui").remove(),$(".chart .legend").remove()},clear:function(){},renderingComplete:function(){window.parent&&window.parent.postMessage&&setTimeout(function(){window.parent.postMessage("datawrapper:vis:rendered","*")},200),this.__renderedDfd.resolve()},rendered:function(){return this.__renderedDfd.promise()},supportsSmartRendering:function(){return!1},_svgCanvas:function(){return!1}}),dw.theme=function(){function a(){var c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length;for("object"==typeof h||_.isFunction(h)||(h={});j>i;i++)if(null!=(c=arguments[i]))for(d in c)e=h[d],f=c[d],h!==f&&(f&&b(f)?(g=e&&b(e)?e:{},h[d]=a(g,f)):void 0!==f&&(h[d]=f));return h}function b(a){return _.isObject(a)&&!_.isArray(a)&&!_.isFunction(a)}var c={},d=function(a){return c[a]};return d.register=function(b){var d=3==arguments.length?c[arguments[1]]:dw.theme.base,e=arguments[arguments.length-1];c[b]=a({},d,{id:b},e)},d}(),dw.theme.base={colors:{palette:["#6E7DA1","#64A4C4","#53CCDD","#4EF4E8"],secondary:["#000000","#777777","#cccccc","#ffd500","#6FAA12"],positive:"#85B4D4",negative:"#E31A1C",background:"#ffffff",text:"#000000",gradients:[["#fefaca","#008b15"],["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],["#8c510a","#d8b365","#f6e8c3","#f5f7ea","#c7eae5","#5ab4ac","#01665e"],["#c51b7d","#e9a3c9","#fde0ef","#faf6ea","#e6f5d0","#a1d76a","#4d9221"],["#b2182b","#ef8a62","#fddbc7","#f8f6e9","#d1e5f0","#67a9cf","#2166ac"]],categories:[["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"],["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]]},annotation:{background:"#000",opacity:.08},padding:{left:0,right:20,bottom:30,top:10},lineChart:{strokeWidth:3,maxLabelWidth:80,fillOpacity:.2,xLabelOffset:20},columnChart:{cutGridLines:!1,barAttrs:{"stroke-width":1},darkenStroke:18},barChart:{barAttrs:{"stroke-width":1}},xAxis:{stroke:"#333"},yAxis:{strokeWidth:1},horizontalGrid:{stroke:"#d9d9d9"},verticalGrid:!1,frame:!1,frameStrokeOnTop:!1,yTicks:!1,hover:!0,tooltip:!0,hpadding:0,vpadding:10,minWidth:100,locale:"de_DE",duration:1e3,easing:"expoInOut"}}).call(this);